## 题目

[678. 有效的括号字符串](https://leetcode.cn/problems/valid-parenthesis-string/)

给你一个只包含三种字符的字符串，支持的字符类型分别是 `'('`、`')'` 和 `'*'`。请你检验这个字符串是否为有效字符串，如果是有效字符串返回 `true` 。

有效字符串符合如下规则：

- 任何左括号 `'('` 必须有相应的右括号 `')'`。
- 任何右括号 `')'` 必须有相应的左括号 `'('` 。
- 左括号 `'('` 必须在对应的右括号之前 `')'`。
- `'*'` 可以被视为单个右括号 `')'` ，或单个左括号 `'('` ，或一个空字符串。
- 一个空字符串也被视为有效字符串。

 

**示例 1：**

```
输入：s = "()"
输出：true
```

**示例 2：**

```
输入：s = "(*)"
输出：true
```

**示例 3：**

```
输入：s = "(*))"
输出：true
```

 

**提示：**

- `1 <= s.length <= 100`
- `s[i]` 为 `'('`、`')'` 或 `'*'`

## 代码

### DP

```java
class Solution {
    public boolean checkValidString(String s) {
        char[]cs=s.toCharArray();
        boolean[][]dp=new boolean[cs.length+1][cs.length+1];
        dp[0][0]=true;
        for(int i=1;i<=cs.length;i++){
            for(int j=0;j<=i;j++){
                if(cs[i-1]=='('){
                    if(j-1>=0) dp[i][j]=dp[i-1][j-1];
                }else if(cs[i-1]==')'){
                    if(j+1<=i) dp[i][j]=dp[i-1][j+1];
                }else{
                    dp[i][j]=dp[i-1][j];
                    if(j-1>=0) dp[i][j]|=dp[i-1][j-1];
                    if(j+1<=i) dp[i][j]|=dp[i-1][j+1];
                }
            }
        }
        return dp[cs.length][0];
    }
}
```

## 思路

### DP

要判断s是否为有效的括号字符串，需要判断**s的首尾字符**以及**s的中间字符**是否符合有效的括号字符串的要求。

假设 `dp[i][j]`表示 **为考虑前i 个字符（字符下标从 111 开始），能否与j个右括号形成合法括号序列**

考虑状态转移如下

- cs[i]== ( : 那么`dp[i][j]` 取决于 `dp[i-1][j-1]`  , 刚好比前一个 多了个右括号 , 当前的补上
- cs[i] == ) : 那么` dp[i][j] ` 取决于 `dp[i-1][j+1]` , 比前一个字符少 一个 ) , 当前的补上
- cs[i] == * : 此时可以分成三种清零
  1. `[i-1 ][j]`字符为true  , 此时  * 表示 空字符
  2. `[i-1 ][j-1]`字符为true  , 此时  * 表示  ( 字符
  3. `[i-1 ][j+1]`字符为true  , 此时  * 表示  ) 字符

